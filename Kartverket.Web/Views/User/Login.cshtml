@model Kartverket.Web.Models.User.Request.UserLoginRequestModel
@{
    ViewData["Title"] = "Logg inn";
}

<div class="is-flex is-flex-direction-column is-align-items-center is-justify-content-center" style="min-height: 80vh;">
    <div class="box" style="width: 300px;">
        <h1 class="title has-text-centered">Logg inn</h1>
        @using (Html.BeginForm("Login", "User", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            <div class="field">
                <label class="label">Brukernavn</label>
                @Html.LabelFor(m => m.Username, new { @class = "label" })
                <div class="control">
                    @Html.TextBoxFor(m => m.Username, new { @class = "input", placeholder = "Brukernavn" })
                </div>
                <span class="has-text-danger">
                    @Html.ValidationMessageFor(m => m.Username)
                </span>
            </div>
            <div class="field">
                @Html.LabelFor(m => m.Password, new { @class = "label" })
                <div class="control has-icons-right" style="position: relative;">
                    @Html.PasswordFor(m => m.Password, new { @class = "input", placeholder = "Passord" })
                    <span id="togglePassword" style="
                        cursor: pointer;
                        position: absolute;
                        right: 10px;
                        top: 50%;
                        transform: translateY(-50%);
                        z-index: 10;
                    ">
                        <i class="fas fa-eye"></i>
                    </span>
                </div>
                <span class="has-text-danger">
                    @Html.ValidationMessageFor(m => m.Password)
                </span>
            </div>
            <div class="field is-grouped is-grouped-centered">
                <div class="control">
                    <button type="submit" class="button is-primary">Logg inn</button>
                </div>
            </div>
        }
        
        @Html.ValidationSummary(true, "", new { @class = "notification is-danger" })
    </div>
</div>

@section Scripts
{
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const passwordInput = document.querySelector('input[type="password"]');
            const toggleIcon = document.querySelector('#togglePassword i');

            toggleIcon.style.cursor = 'pointer';

            toggleIcon.addEventListener('click', () => {
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleIcon.classList.remove('fa-eye');
                    toggleIcon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    toggleIcon.classList.remove('fa-eye-slash');
                    toggleIcon.classList.add('fa-eye');
                }
            });
        });
    </script>
}
