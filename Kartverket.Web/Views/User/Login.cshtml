@model Kartverket.Web.Models.User.Request.UserLoginRequestModel
@{
    ViewData["Title"] = "Logg inn";
}

<div class="is-flex is-flex-direction-column is-align-items-center is-justify-content-center" style="min-height: 80vh;">
    <div class="box" style="width: 300px;">
        <h1 class="title has-text-centered">Logg inn</h1>
        @using (Html.BeginForm("Login", "User", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            <div class="field">
                <label class="label">Brukernavn</label>
                @Html.LabelFor(m => m.Username, new { @class = "label" })
                <div class="control">
                    @Html.TextBoxFor(m => m.Username, new { @class = "input", placeholder = "Brukernavn" })
                </div>
                <span class="has-text-danger">
                    @Html.ValidationMessageFor(m => m.Username)
                </span>
            </div>
            <div class="field">
                @Html.LabelFor(m => m.Password, new { @class = "label" })

                <div style="display: flex; align-items: center; position: relative;">
                    @Html.PasswordFor(m => m.Password, new { 
                        @class = "input", 
                        placeholder = "Passord", 
                        id = "passwordField", 
                        style = "flex: 1;" 
                    })
                    <button type="button" id="togglePassword" style="background: none; border: none; cursor: pointer; margin-left: -35px;">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>

                <span class="has-text-danger">
                    @Html.ValidationMessageFor(m => m.Password)
                </span>
            </div>

            <div class="field is-grouped is-grouped-centered">
                <div class="control">
                    <button type="submit" class="button is-primary">Logg inn</button>
                </div>
            </div>
        }
        
        @Html.ValidationSummary(true, "", new { @class = "notification is-danger" })
    </div>
</div>

@section Scripts
{
    <script>
        document.addEventListener('DOMContentLoaded', () => {
                document.getElementById("togglePassword").addEventListener("click", function () {
                const input = document.getElementById("passwordField");
                const icon = this.querySelector("i");
                const isPassword = input.type === "password";

                input.type = isPassword ? "text" : "password";
                icon.classList.toggle("fa-eye", !isPassword);
                icon.classList.toggle("fa-eye-slash", isPassword);
            });
        });
    </script>
}
